<?xml version="1.0" encoding="UTF-8"?>
<config>
    <parameters>
        <param key="makeNoNamespaceVersion" value="true"/>
        <param key="purgeWhitespace" value="false()"/>
        <param key="pathToTokenizerLib" value="lib-toks.xsl"/>
        <param key="pathToBoundaryLib" value="lib-bdr.xsl"/>
        <param key="useAbbrList" value="true" as="xs:boolean"/>
        <param key="punctCharPattern" value="[\p{P}-[\-‚]]"/>
        <param key="abbrLexURI"
            value="http://www.linguistics.ruhr-uni-bochum.de/~dipper/software/abbrev.lex"/>
    </parameters>
    <postProcessing>
        <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:xs="http://www.w3.org/2001/XMLSchema"
            xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl" xmlns:tei="http://www.tei-c.org/ns/1.0"
            exclude-result-prefixes="#all" version="2.0">
            <xsl:output method="xml" indent="no"/>

            <xsl:template match="node() | @*" mode="postProcess">
                <xsl:copy>
                    <xsl:apply-templates select="node() | @*" mode="#current"/>
                </xsl:copy>
            </xsl:template>

            <xsl:template
                match="tei:w[matches(.,'^‚.+') and not(preceding-sibling::*[1]/self::lb[@break='no'])]" mode="postProcess">
                <!--<xsl:message select="."/>-->
                <tei:pc>‚</tei:pc>
                <tei:w>
                    <xsl:value-of select="substring-after(.,'‚')"/>
                </tei:w>
            </xsl:template>
        </xsl:stylesheet>
    </postProcessing>
    <abbreviations>
        <abbr>&amp;c</abbr>
    </abbreviations>
    <namespace prefix="tei">http://www.tei-c.org/ns/1.0</namespace>
    <!-- tags to be ignored by the wrapper/tokenizer. this means that their content won't be tokenized, but they will be copied as-are. This does not mean necessarily that these do not constitute token boundaries.-->
    <ignore>
        <expression>tei:fw</expression>
        <expression>tei:pb</expression>
        <expression>tei:seg[@type='header' or @type='footer']</expression>
        <expression>tei:milestone</expression>
        <expression>tei:corr</expression>
        <expression>tei:reg</expression>
        <expression>tei:note</expression>
    </ignore>
    <!-- 
        in word-tags do not mark token boundaries. the preceding partial token (i.e. one that does *not* end with a blank) and the following partial token (i.e. one that does not start with a blank) will be wrapped by an <w>-tag, including the in-word token.
    -->
    <in-word-tags>
        <expression>tei:lb[@break='no']</expression>
        <expression>tei:seg</expression>
        <expression>tei:supplied</expression>
    </in-word-tags>
</config>
